---
title: "Generic"
date: 2024-08-02
update: 2024-08-02
tags:
  - Java
  - Interview
---

## 제네릭이 무엇이고, 사용하는 이유

제네릭(Generic)은 클래스, 인터페이스, 메소드를 정의할 때 **<> 기호 안에 타입 파라미터를 선언**하여 사용하며, 이를 통해 **다양한 데이터 타입에 대해 재사용 가능한 코드를 작성**할 수 있습니다.

제네릭을 사용하면 컴파일 시점에 타입 체크를 할 수 있어 잘못된 형변환을 방지하고, 불필요한 타입 캐스팅을 줄일 수 있습니다. 또한 여러 타입 유형을 사용할 수 있어 코드 재사용성이 높아집니다.

## 제네릭 메소드와 제네릭 클래스 및 인터페이스의 차이점

제네릭 클래스는 클래스 이름 뒤에 \<T> 와 같이 선언합니다. 그렇게 하면 클래스 전체에 타입 파라미터가 적용됩니다. 그리고 해당 타입은 객체 생성 시 지정합니다. 제네릭 인터페이스도 이와 동일합니다.

제네릭 메소드는 반환타입 앞에 \<T> 와 같이 선언합니다. 그렇게 하면 해당 메소드의 리턴 타입과 매개변수에만 적용됩니다. 그리고 이 제네릭 메소드를 호출 시 타입을 지정하거나, 컴파일러가 추론합니다.

## 제네릭 사용시 주의할 점

### 상속관계에 있는 객체

예를들어, String 클래스와 Object 클래스는 상속관계에 있지만, 해당 클래스 타입을 사용하는 제네릭은 아무 상관이 없습니다. 

배열은 A가 B의 서브 클래스라면 A 배열도 B 배열의 서브 클래스가 될 수 있습니다. 하지만, **제네릭은 불공변하기 때문에 A가 B의 서브 클래스이어도 List\<A>는 List\<B>와 전혀 관계가 없습니다.**

즉, 메소드에 위와 같이 넘기는 것이 불가능한데, 따라서 제네릭 메소드나 와일드카드로 해결할 수 있습니다.

**제네릭 메소드 예시**

```java
public static <T extends Animal> void addAnimal(List<T> list, T animal) {
    list.add(animal);
}

// 사용 예
List<Dog> dogs = new ArrayList<>();
Dog dog = new Dog();
addAnimal(dogs, dog);  // 정상 작동
```

**와일드 카드 예시**

```java
public static void printAnimals(List<? extends Animal> animals) {
    for (Animal animal : animals) {
        System.out.println(animal);
    }
}

// 사용 예
List<Dog> dogs = new ArrayList<>();
dogs.add(new Dog());
printAnimals(dogs);  // 정상 작동
```



### bounded 와일드 카드와 unbounded 와일드 카드 차이점

`Unbounded 와일드카드`란, 와일드카드 문자 ?를 사용하여 지정되며, 모든 타입을 대신할 수 있는 와일드카드입니다. 
이는 여러 타입이 들어올 수 있음을 의미하는데, 컴파일러는 구체적으로 어떤 타입이 들어올 지 알수가 없습니다.

그러므로 모든 객체의 최상위 부모인 Object로 읽는 것만 허용되며 그 외에 요소를 추가하는 연산을 허용하지 않습니다.

위와 같은 문제를 해결하고자, `Bounded 와일드카드`를 제공하고 있습니다. Bounded 와일드카드를 사용하면 특정 타입을 기준으로 상한 범위와 하한 범위를 지정하면서 호출 범위를 지정할 수 있습니다.

먼저, `상한 경계 와일드카드`는 와일드카드 타입에 extends를 사용하여 와일드카드 타입의 최상위 타입을 지정합니다. 즉, 타입에는 최상위 타입또는 최상위 타입의 자식 클래스들이 
들어올 수 있습니다. 

예를들어, 컬렉션 객체에 상한 경계 와일드카드로 지정했다면, **최상위 타입과 그 위 부모타입으로는 꺼낼 수 있지만, 자식타입으로는 꺼내면 컴파일에러가 발생**합니다. 
그리고 어떤 타입이 와도 컬렉션에 추가하는 것은 불가능합니다. 

추가를 하고 싶으면 `하한 경계 와일드 카드`를 사용하면 됩니다. super를 사용해 최하위 타입과 그 부모 타입만을 허용하도록 지정합니다. 
이렇게 지정하면 최하위 타입의 자식 타입이라면 안전하게 컬렉션에 추가할 수 있고, 부모 타입인 경우에만 추가할때 컴파일 에러가 발생합니다.

하지만, 객체를 꺼낼 때는 Object 타입으로만 컬렉션의 객체를 꺼내는 것이 가능합니다. 


#### 정리

`Unbounded 와일드카드`는 모든 타입을 허용하지만, 오직 Object 객체로 **조회만 가능하고 추가는 불가능합니다.**

`Bounded 와일드카드`는 다시 두 가지로 나뉩니다. 
**상한 경계**는 extends 키워드와 함께 선언한 특정 타입과 그 자식 클래스만 허용하며, **최상위 타입과 그 위 부모타입으로 조회는 가능하지만 어떤 타입이 와도 추가는 불가능합니다.** 
반면 **하한 경계**는 super 키워드와 함께 선언한 특정 타입과 그 부모 클래스만 허용하며, **자식타입으로 추가는 가능하지만 조회는 Object 타입으로만 가능합니다.**


## Reference

https://mangkyu.tistory.com/241